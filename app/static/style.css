/* style.css */
/* =========================================
   1. FONT IMPORTS
   ========================================= */
   @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+Tibetan&family=EB+Garamond&display=swap');
   @import url('https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap');
   @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600&display=swap');
   @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Text:wght@300;400;500&display=swap');
   
   /* =========================================
      2. GLOBAL & TABLE ELEMENTS
      ========================================= */
   body {
       margin: 0;
       padding: 0;
       font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
       -webkit-font-smoothing: antialiased;
       -moz-osx-font-smoothing: grayscale;
   }
   
   table th {
       font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
       font-size: 14px;
       font-weight: 500;
       letter-spacing: -0.01em;
   }
   
   td {
       padding: 8px 12px;
   }
   
   th {
       font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
       padding: 10px;
       color: #1d1d1f;
   }
   
   .translation-table {
       width: 99%;
       height: 98%;
       margin: 0 auto;
       border-collapse: collapse;
       table-layout: fixed;
   }
   
   .translation-table td {
       border: 1px solid #e6e6e6;
       width: 50%;
       text-align: left;
   }
   
   /* =========================================
      3. TEXT STYLES
      ========================================= */
   /* Tibetan Source Text */
   .tibetan-text {
       font-family: 'Noto Serif Tibetan', serif;
       font-size: 23px;
       line-height: 1.8;
       color: #333;
       text-align: right; /* Natural Tibetan flow */
   }
   
   /* Target Editable Text */
   .target-text {
       font-family: 'EB Garamond', serif;
       font-size: 20px;
       line-height: 1.3;
       color: #222;
       text-align: left;
   }
   
   /* Editable cells */
   .translation-table td[contenteditable="true"] {
       background-color: #f9f9f9;
       cursor: pointer;
   }
   
   /* Highlight selected text */
   .highlighted-text {
       background-color: yellow;
       font-weight: bold;
   }
   
   /* =========================================
      4. CONTEXT MENU
      ========================================= */
   #custom-context-menu {
       position: absolute;
       display: none;
       z-index: 1000;
       background: white;
       border: 1px solid #ccc;
       box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
   }
   
   #custom-context-menu ul {
       list-style: none;
       margin: 0;
       padding: 0;
   }
   
   #custom-context-menu li {
       padding: 8px 12px;
       cursor: pointer;
   }
   
   #custom-context-menu li:hover {
       background: #f0f0f0;
   }
   
   /* =========================================
      5. CONTEXT PANE & LOADING SPINNER
      ========================================= */
   .context-pane {
       font-family: 'EB Garamond', serif;
       font-size: 18px;
       line-height: 1.6;
       color: #222;
       background-color: #f5f5f5;
       padding: 12px;
       border-left: 2px solid #ccc;
       text-align: left;
       vertical-align: top;
       position: relative; /* for spinner positioning */
   }
   
   /* Spinner */
   .loading-spinner {
       position: absolute;
       top: 40vh;
       left: calc(48%);
       transform: translate(-50%, -50%);
       width: 30px;
       height: 30px;
       border: 4px solid #ccc;
       border-top-color: #333;
       border-radius: 50%;
       animation: spin 1s linear infinite;
       display: none;
       z-index: 3000;
   }
   
   /* =========================================
      6. ANIMATIONS
      ========================================= */
   @keyframes spin {
       0% { transform: rotate(0deg); }
       100% { transform: rotate(360deg); }
   }
   
   /* Fade-in for new text */
   @keyframes fadeIn {
       from {
           opacity: 0;
           transform: translateY(5px);
       }
       to {
           opacity: 1;
           transform: translateY(0);
       }
   }
   .context-pane p {
       opacity: 0;
       animation: fadeIn 0.8s ease-out forwards;
   }
   
   /* =========================================
      7. CONTEXT SECTION HEADINGS
      ========================================= */
   .context-section {
       margin-bottom: 10px;
   }
   
   .context-heading {
       font-size: 24px;
       font-weight: bold;
       color: #959595;
       margin-bottom: 4px;
   }
   
   .context-subheading {
       font-size: 21px;
       font-weight: bold;
       color: #444;
       margin-bottom: 3px;
   }
   
   .context-text {
       font-size: 21px;
       line-height: 1.4;
       margin: 4px 0 6px 0;
   }
   
   .context-list {
       padding-left: 21px;
       margin: 4px 0 6px 0;
   }
   
   .context-item {
       font-size: 21px;
       line-height: 1.3;
       margin: 4px 0 6px 0;
   }
   
   /* =========================================
      8. APPLE-INSPIRED NAVIGATION BAR
      ========================================= */
   .apple-nav {
       background-color: rgba(255, 255, 255, 0.8);
       backdrop-filter: saturate(180%) blur(20px);
       -webkit-backdrop-filter: saturate(180%) blur(20px);
       border-bottom: 1px solid rgba(0, 0, 0, 0.08);
       position: sticky;
       top: 0;
       z-index: 1000;
       padding: 0;
       box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02);
       transition: background-color 0.3s ease;
   }
   
   .nav-container {
       max-width: 1400px;
       margin: 0 auto;
       display: flex;
       justify-content: space-between;
       align-items: center;
       height: 44px;
       padding: 0 22px;
   }
   
   .app-logo {
       display: flex;
       align-items: center;
       margin-right: 16px;
       text-decoration: none;
       height: 32px;
   }
   
   .nav-logo {
       height: 32px;
       width: auto;
       object-fit: contain;
       transition: opacity 0.2s ease;
       vertical-align: middle;
   }
   
   .nav-logo:hover {
       opacity: 0.8;
   }
   
   .nav-left {
       display: flex;
       align-items: center;
       flex: 1;
   }
   
   .nav-center {
       display: flex;
       align-items: center;
       justify-content: center;
       gap: 8px;
       flex: 1;
   }
   
   .nav-right {
       display: flex;
       align-items: center;
       justify-content: flex-end;
       flex: 1;
       gap: 4px;
   }
   
   .nav-button {
       background: none;
       border: none;
       font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
       font-size: 12px;
       font-weight: 400;
       color: #1d1d1f;
       padding: 8px 12px;
       margin: 0 2px;
       border-radius: 6px;
       cursor: pointer;
       text-decoration: none;
       letter-spacing: -0.01em;
       transition: background-color 0.2s ease, color 0.2s ease;
       display: flex;
       align-items: center;
       justify-content: center;
   }
   
   .nav-button:hover {
       background-color: rgba(0, 0, 0, 0.05);
       color: #0066cc;
   }
   
   .nav-button:focus {
       outline: none;
   }
   
   .arrow-btn {
       width: 28px;
       height: 28px;
       padding: 0;
       display: flex;
       align-items: center;
       justify-content: center;
       color: #1d1d1f;
       border-radius: 50%;
       margin: 0 4px;
   }
   
   .arrow-btn:hover {
       background-color: rgba(0, 0, 0, 0.05);
   }
   
   .file-selector-form {
       margin-right: auto;
   }
   
   .apple-select {
       appearance: none;
       -webkit-appearance: none;
       background-color: rgba(0, 0, 0, 0.03);
       border: none;
       border-radius: 8px;
       padding: 6px 28px 6px 12px;
       font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
       font-size: 13px;
       color: #1d1d1f;
       cursor: pointer;
       background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23666' stroke-width='1.5' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
       background-repeat: no-repeat;
       background-position: right 10px center;
       min-width: 180px;
       transition: background-color 0.2s ease;
       height: 32px;
   }
   
   .apple-select:hover {
       background-color: rgba(0, 0, 0, 0.06);
   }
   
   .apple-select:focus {
       outline: none;
       box-shadow: 0 0 0 2px rgba(0, 125, 250, 0.6);
   }
   
   .search-container {
       margin-left: 8px;
   }
   
   .search-wrapper {
       position: relative;
       display: flex;
       align-items: center;
   }
   
   .search-icon {
       position: absolute;
       left: 10px;
       color: #86868b;
       pointer-events: none;
   }
   
   #search-box {
       background-color: rgba(0, 0, 0, 0.03);
       border: none;
       border-radius: 8px;
       padding: 6px 12px 6px 32px;
       font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, sans-serif;
       font-size: 13px;
       color: #1d1d1f;
       width: 180px;
       transition: width 0.3s ease, background-color 0.2s ease;
   }
   
   #search-box:focus {
       outline: none;
       background-color: rgba(0, 0, 0, 0.06);
       width: 220px;
       box-shadow: 0 0 0 2px rgba(0, 125, 250, 0.6);
   }
   
   #search-box::placeholder {
       color: #86868b;
   }
   
   /* =========================================
      9. DARK MODE OVERRIDES
      ========================================= */
   @media (prefers-color-scheme: dark) {
       body {
           background-color: #1e1e1e;
           color: #f5f5f7;
       }
       
       .apple-nav {
           background-color: rgba(30, 30, 30, 0.8);
           border-bottom: 1px solid rgba(255, 255, 255, 0.1);
       }
       
       .nav-button {
           color: #f5f5f7;
       }
       
       .nav-button:hover {
           background-color: rgba(255, 255, 255, 0.1);
           color: #0d84ff;
       }
       
       .arrow-btn {
           color: #f5f5f7;
       }
       
       .arrow-btn:hover {
           background-color: rgba(255, 255, 255, 0.1);
       }
       
       .apple-select {
           background-color: rgba(255, 255, 255, 0.06);
           color: #f5f5f7;
           background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23aaa' stroke-width='1.5' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
       }
       
       .apple-select:hover {
           background-color: rgba(255, 255, 255, 0.1);
       }
       
       #search-box {
           background-color: rgba(255, 255, 255, 0.06);
           color: #f5f5f7;
       }
       
       #search-box:focus {
           background-color: rgba(255, 255, 255, 0.1);
       }
       
       #search-box::placeholder {
           color: #999;
       }
       
       th {
           color: #f5f5f7;
       }
       
       .translation-table td, .translation-table th {
           background-color: #2b2b2b;
           color: #e0e0e0;
           border-color: #444;
       }
       
       .context-pane::-webkit-scrollbar {
           display: none;
       }
       #custom-context-menu {
           background-color: #333;
           color: #e0e0e0;
           border: 1px solid #555;
       }
       #custom-context-menu li:hover {
           background: #444;
       }
       #keyword-popup {
           background: #2c2c2c;
           color: #e0e0e0;
           border: 1px solid #555;
       }
       .loading-spinner {
           border: 4px solid #444;
           border-top-color: #bbb;
       }
       .context-heading {
           color: #b0b0b0;
       }
       .context-list,
       .context-item {
           color: #e0e0e0;
       }
       .translation-table td[contenteditable="true"] {
           background-color: #333;
           color: #ddd;
       }
       a {
           color: #79a6f6;
       }
       a:hover {
           color: #a6c3ff;
       }
       #top-bar-menu {
           background-color: #292929;
           border-bottom: 2px solid #444;
       }
       #top-bar-menu a {
           color: #ddd;
       }
       #top-bar-menu a:hover {
           color: #ffffff;
       }
   }